@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;

    /* Surfaces */
    --bg: 248 250 252;
    --surface: 255 255 255;
    --surface-2: 244 246 249;
    --overlay: 255 255 255;

    /* Text */
    --fg: 15 23 42;
    --fg-muted: 51 65 85;
    --fg-subtle: 100 116 139;

    /* Borders */
    --border: 226 232 240;
    --border-strong: 203 213 225;

    /* Accent (calm ink/slate with a whisper of blue) */
    --accent: 51 61 78;
    --accent-fg: 255 255 255;
    --accent-soft: 244 247 250;

    /* Focus */
    --ring: var(--accent);
    --ring-offset: var(--bg);

    /* Shape */
    --radius-sm: 10px;
    --radius-md: 12px;
    --radius-lg: 16px;

    /* Elevation (borders-first; shadows are barely-there) */
    --shadow-sm: 0 1px 2px rgb(15 23 42 / 0.04);
    --shadow-md: 0 8px 24px rgb(15 23 42 / 0.06);

    /* Motion */
    --ease-standard: cubic-bezier(0.2, 0.8, 0.2, 1);
    --dur-1: 150ms;
    --dur-2: 180ms;
    --dur-3: 220ms;
  }

  .dark {
    color-scheme: dark;

    --bg: 8 10 13;
    --surface: 12 15 20;
    --surface-2: 16 20 27;
    --overlay: 12 15 20;

    --fg: 226 232 240;
    --fg-muted: 148 163 184;
    --fg-subtle: 100 116 139;

    --border: 30 41 59;
    --border-strong: 51 65 85;

    --accent: 140 156 180;
    --accent-fg: 10 15 23;
    --accent-soft: 18 24 33;

    --ring: var(--accent);
    --ring-offset: var(--bg);

    --shadow-sm: 0 1px 2px rgb(0 0 0 / 0.35);
    --shadow-md: 0 10px 28px rgb(0 0 0 / 0.45);
  }

  html {
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--fg));
  }

  ::selection {
    background-color: rgb(var(--accent) / 0.14);
  }

  :focus-visible {
    outline: 2px solid rgb(var(--ring) / 0.35);
    outline-offset: 2px;
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation: none !important;
      transition-duration: 0ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@keyframes stage-enter-fabric {
  from { opacity: 0.985; transform: scale(0.998); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes stage-enter-reference {
  from { opacity: 0.96; transform: translateY(6px) scale(0.998); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes stage-enter-select {
  from { opacity: 0.95; transform: scale(0.9975); filter: saturate(0.95); }
  to { opacity: 1; transform: scale(1); filter: saturate(1); }
}

@keyframes stage-enter-build {
  from { opacity: 0.94; transform: translateY(4px) scale(0.997); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes stage-enter-export {
  from { opacity: 0.92; transform: scale(0.996); filter: contrast(0.98); }
  to { opacity: 1; transform: scale(1); filter: contrast(1); }
}

@keyframes transition-sweep {
  from { transform: translateX(-100%); }
  to { transform: translateX(100%); }
}

@keyframes stepper-settle {
  0% { transform: scale(1); }
  45% { transform: scale(0.986); }
  100% { transform: scale(1); }
}

.stage-shell {
  height: 100%;
  width: 100%;
  transform-origin: center center;
}

.stage-shell--fabric {
  animation: stage-enter-fabric 180ms var(--ease-standard);
}

.stage-shell--reference {
  animation: stage-enter-reference 220ms var(--ease-standard);
}

.stage-shell--select {
  animation: stage-enter-select 220ms var(--ease-standard);
}

.stage-shell--build {
  animation: stage-enter-build 250ms var(--ease-standard);
}

.stage-shell--export {
  animation: stage-enter-export 260ms var(--ease-standard);
}

@keyframes mascot-blink {
  0%,
  43%,
  47%,
  100% {
    transform: scaleY(1);
  }

  45% {
    transform: scaleY(0.14);
  }
}

.magpie-wordmark {
  position: fixed;
  left: 1rem;
  top: 1rem;
  z-index: 120;
  display: flex;
  align-items: center;
  gap: 1.05rem;
  pointer-events: none;
  user-select: none;
}

.magpie-wordmark__eyes {
  display: flex;
  align-items: center;
  gap: 0.58rem;
}

.magpie-wordmark__eye {
  width: 0.48rem;
  height: 0.48rem;
  display: flex;
  align-items: center;
  justify-content: center;
  will-change: transform;
}

.magpie-wordmark__eye--delay .magpie-wordmark__dot {
  animation-delay: 0.18s;
}

.magpie-wordmark__dot {
  width: 0.44rem;
  height: 0.44rem;
  border-radius: 999px;
  background: rgb(var(--fg));
  animation: mascot-blink 7.25s ease-in-out infinite;
  transform-origin: center;
}

.magpie-wordmark__text {
  color: rgb(var(--fg));
  font-family: "Apple Garamond", "Garamond", "Baskerville", "Times New Roman", serif;
  font-size: clamp(1.4rem, 2.1vw, 1.9rem);
  font-weight: 400;
  letter-spacing: 0.01em;
  line-height: 1;
}

@keyframes splash-wordmark-in {
  from {
    opacity: 0;
    transform: translateY(6px);
    letter-spacing: 0.04em;
  }

  to {
    opacity: 1;
    transform: translateY(0);
    letter-spacing: 0.01em;
  }
}

.magpie-splash {
  position: fixed;
  inset: 0;
  z-index: 999;
  display: grid;
  place-items: center;
  background: rgb(255 255 255);
}

.magpie-splash__wordmark {
  color: rgb(22 30 42);
  font-family: "Apple Garamond", "Garamond", "Baskerville", "Times New Roman", serif;
  font-size: clamp(2rem, 4.4vw, 3.8rem);
  font-weight: 400;
  line-height: 1;
  animation: splash-wordmark-in 420ms var(--ease-standard) both;
}
