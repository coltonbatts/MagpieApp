@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;

    /* Surfaces */
    --bg: 248 250 252;
    --surface: 255 255 255;
    --surface-2: 244 246 249;
    --overlay: 255 255 255;

    /* Text */
    --fg: 15 23 42;
    --fg-muted: 51 65 85;
    --fg-subtle: 100 116 139;

    /* Borders */
    --border: 226 232 240;
    --border-strong: 203 213 225;

    /* Accent (calm ink/slate with a whisper of blue) */
    --accent: 51 61 78;
    --accent-fg: 255 255 255;
    --accent-soft: 244 247 250;

    /* Focus */
    --ring: var(--accent);
    --ring-offset: var(--bg);

    /* Shape */
    --radius-sm: 10px;
    --radius-md: 12px;
    --radius-lg: 16px;

    /* Elevation (borders-first; shadows are barely-there) */
    --shadow-sm: 0 1px 2px rgb(15 23 42 / 0.04);
    --shadow-md: 0 8px 24px rgb(15 23 42 / 0.06);

    /* Motion */
    --ease-standard: cubic-bezier(0.2, 0.8, 0.2, 1);
    --dur-1: 150ms;
    --dur-2: 180ms;
    --dur-3: 220ms;
  }

  .dark {
    color-scheme: dark;

    --bg: 8 10 13;
    --surface: 12 15 20;
    --surface-2: 16 20 27;
    --overlay: 12 15 20;

    --fg: 226 232 240;
    --fg-muted: 148 163 184;
    --fg-subtle: 100 116 139;

    --border: 30 41 59;
    --border-strong: 51 65 85;

    --accent: 140 156 180;
    --accent-fg: 10 15 23;
    --accent-soft: 18 24 33;

    --ring: var(--accent);
    --ring-offset: var(--bg);

    --shadow-sm: 0 1px 2px rgb(0 0 0 / 0.35);
    --shadow-md: 0 10px 28px rgb(0 0 0 / 0.45);
  }

  html {
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    background-color: rgb(var(--bg));
    color: rgb(var(--fg));
  }

  ::selection {
    background-color: rgb(var(--accent) / 0.14);
  }

  :focus-visible {
    outline: 2px solid rgb(var(--ring) / 0.35);
    outline-offset: 2px;
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation: none !important;
      transition-duration: 0ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@keyframes stage-enter-fabric {
  from { opacity: 0.985; transform: scale(0.998); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes stage-enter-reference {
  from { opacity: 0.96; transform: translateY(6px) scale(0.998); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes stage-enter-select {
  from { opacity: 0.95; transform: scale(0.9975); filter: saturate(0.95); }
  to { opacity: 1; transform: scale(1); filter: saturate(1); }
}

@keyframes stage-enter-build {
  from { opacity: 0.94; transform: translateY(4px) scale(0.997); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes stage-enter-export {
  from { opacity: 0.92; transform: scale(0.996); filter: contrast(0.98); }
  to { opacity: 1; transform: scale(1); filter: contrast(1); }
}

@keyframes transition-sweep {
  from { transform: translateX(-100%); }
  to { transform: translateX(100%); }
}

@keyframes stepper-settle {
  0% { transform: scale(1); }
  45% { transform: scale(0.986); }
  100% { transform: scale(1); }
}

.stage-shell {
  height: 100%;
  width: 100%;
  transform-origin: center center;
}

.stage-shell--fabric {
  animation: stage-enter-fabric 180ms var(--ease-standard);
}

.stage-shell--reference {
  animation: stage-enter-reference 220ms var(--ease-standard);
}

.stage-shell--select {
  animation: stage-enter-select 220ms var(--ease-standard);
}

.stage-shell--build {
  animation: stage-enter-build 250ms var(--ease-standard);
}

.stage-shell--export {
  animation: stage-enter-export 260ms var(--ease-standard);
}
